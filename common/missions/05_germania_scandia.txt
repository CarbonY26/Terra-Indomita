barbaricum_scandia_mission = {
    icon = rome_3
	header = german_mission1

    repeatable = no

    chance = {
        factor = 5
    }

    potential = {
        NOT = { has_variable = barbaricum_scandia_mission }
        is_subject = no
        has_civil_war = no
		is_tribal = yes
		OR = {
			primary_culture = scandian
			primary_culture = cimbrian
		}
		NOT = {
			tag = XXS
		}
    }

    abort = {
        ai_mission_back_out_trigger = yes
    }

    on_start = {
        start_mission_ai_effect = yes
		trigger_event = me_germania_scandia_ti.20
    }

    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = barbaricum_scandia_mission
            days = 7300
        }
    }

    on_completion = {
        complete_mission_effect = yes
    }

    barbaricum_scandia_mission_task_1 = { #Scandian Ports
        icon = task_expansion
		
		highlight = {
			scope:province = {
				is_in_region = scandinavia_region
				is_coastal = yes
        	}
        }

        allow = {
			any_owned_province = {
				is_coastal = yes
				is_port = yes
				is_in_region = scandinavia_region
			}
			any_owned_province = {
				has_building = tavern_building
			}
			custom_tooltip = {
				text = does_not_have_naval_expansion_tt
				has_variable = naval_expansion_var
			}
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.1 #because of our fame a potential explorer joins
			show_as_tooltip = {
				create_character = {
					age = 25
					culture = root.culture
					religion = root.religion
					hidden_effect = {
						positive_martial_trait_effect = yes
						amazing_martial_effect = yes
						amazing_finesse_effect = yes
						amazing_charisma_effect = yes
						amazing_zeal_effect = yes
					}
				}
			}
			custom_tooltip = barbaricum_scandia_mission_task_1_tt
			hidden_effect = {
				area:ultima_thule_area = { mission_area_claim_effect = yes }
				area:west_gothia_area = { mission_area_claim_effect = yes }
				area:east_gothia_area = { mission_area_claim_effect = yes }
				area:herulia_area = { mission_area_claim_effect = yes }
			}
        }
    }
	
	barbaricum_scandia_mission_task_2 = { #Explore Baltic
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_1 }
		duration = 365

        allow = {
			treasury >= 100
			custom_tooltip = {
				text = does_not_have_naval_expansion_tt
				has_variable = naval_expansion_var
			}
		}
		
		on_start = {
			show_as_tooltip = {
				add_treasury = -100
			}
			trigger_event = me_germania_scandia_ti.200
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.2 #201, 202
			show_as_tooltip = {
				add_country_modifier = {
					name = scandia_baltic_explorer
					duration = 7300
				}
			}
        }
    }
	
	barbaricum_scandia_mission_task_3 = { #Baltic Isles
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_2 }
		
		highlight = {
			scope:province = {
				OR = {
					province_id = 6004
					province_id = 6009
					province_id = 6010
				}
        	}
        }

        allow = {
			owns = 6004
			owns = 6009
			owns = 6010
			any_owned_province = {
				OR = {
					province_id = 6004
					province_id = 6009
					province_id = 6010
				}
				fort_level >= 1
			}
			any_owned_province = {
				OR = {
					province_id = 6004
					province_id = 6009
					province_id = 6010
				}
				is_port = yes
			}
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.3
			show_as_tooltip = {
				add_1_free_province_investments = yes
				random_owned_province = {
					limit = {
						OR = {
							province_id = 6004
							province_id = 6009
							province_id = 6010
						}
						is_port = yes
					}
					add_special_pop = {
						text = "add_1_merchant_tt"
						type = merchant
						count = 1
					}
				}
			}
        }
    }
	
	barbaricum_scandia_mission_task_4 = { #North Sea Trade
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_1 }
		
		highlight = {
			scope:province = {
				is_in_region = scandinavia_region
        	}
        }

        allow = {
			any_owned_province = {
				is_in_region = scandinavia_region
				has_building = commerce_building
				province_has_special_pop = {
					text = "prov_has_1_merchant_tt"
					type = merchant
					count >= 1
				}
			}
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.4
			show_as_tooltip = {
				add_country_modifier = {
					name = scandia_north_sea_trade
					duration = 7300
				}
			}	
        }
    }
	
	barbaricum_scandia_mission_task_5 = { #Explore Caledonia
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_2 }
		duration = 365

        allow = {
			treasury >= 200
			custom_tooltip = {
				text = does_not_have_naval_construction_tt
				has_variable = naval_construction_var
			}
		}
		
		on_start = {
			show_as_tooltip = {
				add_treasury = -200
			}
			trigger_event = me_germania_scandia_ti.500
		}

        on_completion = {
			trigger_event = me_germania_scandia_ti.5 #501
			custom_tooltip = barbaricum_scandia_mission_task_5_tt
			hidden_effect = {
				area:caledonia_meridionalis_area = { mission_area_claim_effect = yes }
				area:caledonia_septentrionalis_area = { mission_area_claim_effect = yes }
				area:caledonia_occidentalis_area = { mission_area_claim_effect = yes }
			}
        }
    }
	
	barbaricum_scandia_mission_task_6 = { #Caledonian Colony
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_5 }
		duration = 183
		
		bypass = {
			has_completed_mission_task = barbaricum_scandia_mission_task_7
		}
		
		prevented_by = { barbaricum_scandia_mission_task_7 }
		
		highlight = {
			scope:province = {
				OR = {
					is_in_area = caledonia_meridionalis_area
					is_in_area = caledonia_septentrionalis_area
					is_in_area = caledonia_occidentalis_area
				}
				is_coastal = yes
        	}
        }

        allow = {
			region:caledonia_region = {
				any_region_province = {
					OR = {
						is_in_area = caledonia_meridionalis_area
						is_in_area = caledonia_septentrionalis_area
						is_in_area = caledonia_occidentalis_area
					}
					has_owner = no
					is_coastal = yes
				}
			}
			any_owned_province = {
				any_pops_in_province = {
					pop_culture = root.culture
				}
			}
			treasury >= 50
		}
		
		on_start = {
			trigger_event = me_germania_scandia_ti.600
			show_as_tooltip = {
				add_treasury = -50
			}
		}


        on_completion = {
			custom_tooltip = barbaricum_scandia_mission_task_6_found_colony_tt
			trigger_event = me_germania_scandia_ti.6
        }
    }
	
	barbaricum_scandia_mission_task_7 = { #Conquer Caledonian Outpost
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_5 }
		
		bypass = {
			has_completed_mission_task = barbaricum_scandia_mission_task_6
		}
		
		prevented_by = { barbaricum_scandia_mission_task_6 }
		
		highlight = {
			scope:province = {
				OR = {
					is_in_area = caledonia_meridionalis_area
					is_in_area = caledonia_septentrionalis_area
					is_in_area = caledonia_occidentalis_area
				}
				is_coastal = yes
        	}
        }

        allow = {
			any_owned_province = {
				OR = {
					is_in_area = caledonia_meridionalis_area
					is_in_area = caledonia_septentrionalis_area
					is_in_area = caledonia_occidentalis_area
				}
				is_coastal = yes
			}
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.7
			show_as_tooltip = {
				add_military_experience = 5
				current_ruler = {
					add_trait = conqueror
					add_focus_experience = {
						text = "add_25_focus_xp"
						amount = 25
					}
				}
			}
        }
    }
	
	barbaricum_scandia_mission_task_8 = { #Caledonian Protectorate
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_6 barbaricum_scandia_mission_task_7 }
		
		highlight = {
			scope:province = {
				OR = {
					is_in_area = caledonia_meridionalis_area
					is_in_area = caledonia_septentrionalis_area
					is_in_area = caledonia_occidentalis_area
				}
        	}
        }

        allow = {
			owns_or_subject_owns_area = caledonia_meridionalis_area
			owns_or_subject_owns_area = caledonia_septentrionalis_area
			owns_or_subject_owns_area = caledonia_occidentalis_area
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.8
			custom_tooltip = barbaricum_scandia_mission_task_8_tt
			hidden_effect = {
				region:britain_region = {
					every_region_province = { add_claim = ROOT }
				}
				region:caledonia_region = {
					every_region_province = { add_claim = ROOT }
				}
			}
			show_as_tooltip = {
				p:2108 = {
					add_special_pop = {
						text = "add_1_priest_tt"
						type = priest
						count = 1
					}
				}
				p:2132 = {
					add_special_pop = {
						text = "add_1_priest_tt"
						type = priest
						count = 1
					}
				}
			}
        }
    }
	
	barbaricum_scandia_mission_task_9 = { #Isle of Albion
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_8 }
		
		highlight = {
			scope:province = {
				is_in_region = britain_region
        	}
        }

        allow = {
			owns_or_subject_owns_area = dumnonia_area
			owns_or_subject_owns_area = durotrigia_area
			owns_or_subject_owns_area = cantiacia_area
			owns_or_subject_owns_area = icenia_area
			owns_or_subject_owns_area = dobunnia_area
			owns_or_subject_owns_area = coritania_area
			owns_or_subject_owns_area = cornovia_area
			owns_or_subject_owns_area = britannia_secunda_septentrionalis_area
			owns_or_subject_owns_area = britannia_secunda_meridionalis_area
			owns_or_subject_owns_area = brigantia_area
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.9
			show_as_tooltip = {
				add_political_influence = 50
				p:2028 = {
					add_special_pop = {
						text = "add_1_priest_tt"
						type = priest
						count = 1
					}
				}
				p:2075 = {
					add_special_pop = {
						text = "add_1_priest_tt"
						type = priest
						count = 1
					}
				}
				p:2047 = {
					add_special_pop = {
						text = "add_1_priest_tt"
						type = priest
						count = 1
					}
				}
				current_ruler = {
					add_focus_experience = {
						text = "add_50_focus_xp"
						amount = 50
					}
				}
			}
        }
    }
	
	barbaricum_scandia_mission_task_10 = { #Isle of Hibernia
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_8 }
		
		highlight = {
			scope:province = {
				OR = {
					is_in_area = hibernia_septentrionalis_area
					is_in_area = hibernia_orientalis_area
					is_in_area = hibernia_occidentalis_area
					is_in_area = hibernia_meridionalis_area
				}
        	}
        }

        allow = {
			owns_or_subject_owns_area = hibernia_septentrionalis_area
			owns_or_subject_owns_area = hibernia_orientalis_area
			owns_or_subject_owns_area = hibernia_occidentalis_area
			owns_or_subject_owns_area = hibernia_meridionalis_area
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.10
			show_as_tooltip = {
				add_political_influence = 25
				p:2190 = {
					add_special_pop = {
						text = "add_1_priest_tt"
						type = priest
						count = 1
					}
				}
				current_ruler = {
					add_focus_experience = {
						text = "add_25_focus_xp"
						amount = 25
					}
				}
			}
        }
    }
	
	barbaricum_scandia_mission_task_11 = { #Unite Southern Scandia
        icon = task_expansion
		
		highlight = {
			scope:province = {
				OR = {
					province_id = 6032
					province_id = 6038
					province_id = 6003
					province_id = 6012
					province_id = 6008
				}
        	}
        }

        allow = {
			owns = 6032
			owns = 6038
			owns = 6003
			owns = 6012
			owns = 6008
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.11
			custom_tooltip = barbaricum_scandia_mission_task_11_tt
			hidden_effect = {
				area:herulia_area = { mission_area_claim_effect = yes }
			}
        }
    }
	
	barbaricum_scandia_mission_task_12 = { #Scandian Holy Site
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_11 }
		
		highlight = {
			scope:province = {
				OR = {
					province_id = 6032
				}
        	}
        }

        allow = {
			p:6032 = {
				owner = root
				province_has_special_pop = {
					text = "prov_has_1_priest_tt"
					type = priest
					count >= 1
				}
			}
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.12
			show_as_tooltip = {
				add_political_influence = 50
				create_country_treasure = {
					key = "scandian_sun_wagon"
					icon = "treasure_chest"
					modifier = {
						local_pop_assimilation_speed_modifier = 0.1
						local_pop_conversion_speed_modifier = 0.15
					}
				}
			}
        }
    }
	
	barbaricum_scandia_mission_task_13 = { #Eudosian Isles
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_11 }
		
		highlight = {
			scope:province = {
				is_in_area = scandia_insula_area
        	}
        }

        allow = {
			owns_area = scandia_insula_area
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.13
			custom_tooltip = barbaricum_scandia_mission_task_13_tt
			hidden_effect = {
				area:cimbrica_inferioris_area = { mission_area_claim_effect = yes }
				area:cimbrica_superioris_area = { mission_area_claim_effect = yes }
			}
        }
    }
	
	barbaricum_scandia_mission_task_14 = { #Fortify Scandia
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_13 }
		
		highlight = {
			scope:province = {
				OR = {
					province_id = 3884
					province_id = 3882
					province_id = 6003
				}
        	}
        }

        allow = {
			any_owned_province = {
				province_has_special_pop = {
					text = "prov_has_1_architect_tt"
					type = architect
					count >= 1
				}
			}
			p:3884 = {
				owner = root
				fort_level >= 1
			}
			p:3882 = {
				owner = root
				fort_level >= 1
			}
			p:6003 = {
				owner = root
				fort_level >= 1
			}
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.14
			show_as_tooltip = {
				add_stability = 10
				p:3884 = {
					add_permanent_province_modifier = {
						name = fortified_scandia_mod
					}
				}
				p:3882 = {
					add_permanent_province_modifier = {
						name = fortified_scandia_mod
					}
				}
				p:6003 = {
					add_permanent_province_modifier = {
						name = fortified_scandia_mod
					}
				}
			}
        }
    }
	
	barbaricum_scandia_mission_task_15 = { #Cimbric Peninsula
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_13 }
		
		highlight = {
			scope:province = {
				OR = {
					is_in_area = cimbrica_inferioris_area
					is_in_area = cimbrica_superioris_area
				}
        	}
        }

        allow = {
			owns_area = cimbrica_inferioris_area
			owns_area = cimbrica_superioris_area
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.15
			custom_tooltip = barbaricum_scandia_mission_task_15_tt
			hidden_effect = {
				area:pharodenia_area = { mission_area_claim_effect = yes }
				area:suradonia_area = { mission_area_claim_effect = yes }
				area:saxony_area = { mission_area_claim_effect = yes }
				area:rugia_area = { mission_area_claim_effect = yes }
				area:galindia_area = { mission_area_claim_effect = yes }
				area:chrnonis_area = { mission_area_claim_effect = yes }
				area:turuntia_area = { mission_area_claim_effect = yes }
			}
        }
    }
	
	barbaricum_scandia_mission_task_16 = { #Baltic Coast
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_15 }
		
		highlight = {
			scope:province = {
                OR = {
					is_in_area = pharodenia_area
					is_in_area = suradonia_area
					is_in_region = venedia_region
				}
                is_coastal = yes
            }
        }

        allow = {
			custom_tooltip = {
				text = barbaricum_gothonia_mission_task_6_tt
				region:venedia_region = {
					NOT = {
						any_region_province = {
							is_coastal = yes
							NOT = {
								owner = ROOT
							}
						}
					}
				}
				area:pharodenia_area = {
					NOT = {
						any_area_province = {
							is_coastal = yes
							NOT = {
								owner = ROOT
							}
						}
					}
				}
				area:suradonia_area = {
					NOT = {
						any_area_province = {
							is_coastal = yes
							NOT = {
								owner = ROOT
							}
						}
					}
				}
			}
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.16
			show_as_tooltip = {
				add_country_modifier = {
					name = scandia_baltic_dom
					duration = 10950
				}
				p:4865 = {
					add_special_pop = {
						text = "add_1_priest_tt"
						type = priest
						count = 1
					}
				}
			}
        }
    }
	
	barbaricum_scandia_mission_task_17 = { #Naval Hegemon
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_16 }

        allow = {
			num_of_ships >= 50
			any_character = {
				is_admiral = yes
				martial >= 10
			}
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.17
			show_as_tooltip = {
				add_country_modifier = {
					name = scandia_hegemon
					duration = -1
				}
				create_unit = {
					sub_unit = octere
					location = 6032
					navy = yes
				}
			}
        }
    }
	
	barbaricum_scandia_mission_task_18 = { #Ultima Thule
        icon = task_expansion
		duration = 365
		requires = { barbaricum_scandia_mission_task_17  barbaricum_scandia_mission_task_8 }
		final = yes
		

        allow = {
			num_of_ships >= 50
			treasury >= 500
		}
		
		on_start = {
			trigger_event = me_germania_scandia_ti.1800
			show_as_tooltip = {
				add_treasury = -500
			}
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.18 #1801, 1802
			custom_tooltip = barbaricum_scandia_mission_task_18_reward_tt
			show_as_tooltip = {
				add_innovation = 3
			}
        }
    }
	
	barbaricum_scandia_mission_task_19 = { #Monopolize the North Sea #monopolise :(
        icon = task_expansion
		requires = { barbaricum_scandia_mission_task_4 }
		
		highlight = {
			scope:province = {
				OR = {
					province_id = 3887
					province_id = 3882
					province_id = 3884
				}
        	}
        }

        allow = {
			p:3887 = {
				has_building = commerce_building
			}
			p:3882 = {
				has_building = commerce_building
			}
			p:3884 = {
				has_building = commerce_building
			}
		}


        on_completion = {
			trigger_event = me_germania_scandia_ti.19
			show_as_tooltip = {
				add_country_modifier = {
					name = scandia_sound_toll
					duration = -1
				}
				p:3887 = {
					add_special_pop = {
						text = "add_1_merchant_tt"
						type = merchant
						count = 1
					}
				}
				p:3882 = {
					add_special_pop = {
						text = "add_1_merchant_tt"
						type = merchant
						count = 1
					}
				}
				p:3884 = {
					add_special_pop = {
						text = "add_1_merchant_tt"
						type = merchant
						count = 1
					}
				}
			}
        }
    }
}
